{% extends "base.html" %}

{% block title %}–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∑–∞–Ω—è—Ç–∏–π{% endblock %}

{% block content %}
<div class="card">
    <h2>üìÖ –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∑–∞–Ω—è—Ç–∏–π</h2>
    
    <form method="get" action="{{ url_for('schedule') }}" class="filter-form">
        <div class="form-group">
            <label for="group_id">–§–∏–ª—å—Ç—Ä –ø–æ –≥—Ä—É–ø–ø–µ:</label>
            <select name="group_id" id="group_id">
                <option value="">–í—Å–µ –≥—Ä—É–ø–ø—ã</option>
                {% for group in groups %}
                    <option value="{{ group.id }}">{{ group.name }}</option>
                {% endfor %}
            </select>
        </div>
        <button type="submit" class="btn">–§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å</button>
        <a href="{{ url_for('schedule') }}" class="btn">–°–±—Ä–æ—Å–∏—Ç—å</a>
    </form>
    
    <a href="{{ url_for('add_schedule') }}" class="btn btn-success">‚ûï –î–æ–±–∞–≤–∏—Ç—å –∑–∞–Ω—è—Ç–∏–µ</a>
    
    {% if schedules %}
        <table>
            <thead>
                <tr>
                    <th>–î–µ–Ω—å –Ω–µ–¥–µ–ª–∏</th>
                    <th>–í—Ä–µ–º—è</th>
                    <th>–ì—Ä—É–ø–ø–∞</th>
                    <th>–î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞</th>
                    <th>–¢–∏–ø</th>
                    <th>–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å</th>
                    <th>–ê—É–¥–∏—Ç–æ—Ä–∏—è</th>
                    <th>–ù–µ–¥–µ–ª—è</th>
                    <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                </tr>
            </thead>
            <tbody>
                {% for s in schedules %}
                <tr>
                    <td>
                        {% if s.day_of_week == 1 %}–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫{% elif s.day_of_week == 2 %}–í—Ç–æ—Ä–Ω–∏–∫{% elif s.day_of_week == 3 %}–°—Ä–µ–¥–∞{% elif s.day_of_week == 4 %}–ß–µ—Ç–≤–µ—Ä–≥{% elif s.day_of_week == 5 %}–ü—è—Ç–Ω–∏—Ü–∞{% elif s.day_of_week == 6 %}–°—É–±–±–æ—Ç–∞{% else %}–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ{% endif %}
                    </td>
                    <td>{{ s.start_time }} - {{ s.end_time }}</td>
                    <td>{{ s.group.name }}</td>
                    <td>{{ s.discipline.name }}</td>
                    <td>{{ s.lesson_type }}</td>
                    <td>{{ s.teacher.last_name }} {{ s.teacher.first_name }}</td>
                    <td>–∞—É–¥. {{ s.room.room_number }}</td>
                    <td>{{ s.week_type }}</td>
                    <td class="actions">
                        <a href="{{ url_for('delete_schedule', id=s.id) }}" class="btn btn-danger" onclick="return confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ –∑–∞–Ω—è—Ç–∏–µ?')">–£–¥–∞–ª–∏—Ç—å</a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <div class="empty-message">
            <p>–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –ø—É—Å—Ç–æ. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤–æ–µ –∑–∞–Ω—è—Ç–∏–µ!</p>
        </div>
    {% endif %}
</div>
{% endblock %}
